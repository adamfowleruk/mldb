<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>MLJS Source: widget-profile.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	
	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">
	
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">MLJS</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="com.marklogic.widgets.bits.html">bits</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="com.marklogic.widgets.actionconfig.html">actionconfig</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.actionorderer.html">actionorderer</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.actions.javascript.html">javascript</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.addressbar.html">addressbar</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.advancedsearch.html">advancedsearch</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.collectionuris.html">collectionuris</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.configwrapper.html">configwrapper</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.cooccurence.html">cooccurence</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.create.html">create</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.docheadviewer.html">docheadviewer</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.docproperties.html">docproperties</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.docviewer.html">docviewer</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.dropzone.html">dropzone</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.entityfacts.html">entityfacts</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.error.html">error</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.graphexplorer.html">graphexplorer</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.highcharts.html">highcharts</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.kratu.html">kratu</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.layouts.column.html">column</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.layouts.thickthin.html">thickthin</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.layouts.thinthick.html">thinthick</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.layouts.thinthickthin.html">thinthickthin</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.layouts.threecolumns.html">threecolumns</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.layouts.twocolumns.html">twocolumns</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.markings.html">markings</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.openlayers.html">openlayers</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.profile.html">profile</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.rdb2rdf.html">rdb2rdf</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.searchbar.html">searchbar</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.searchfacets.html">searchfacets</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.searchoptions.html">searchoptions</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.searchpage.html">searchpage</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.searchpager.html">searchpager</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.searchresults.html">searchresults</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.searchselection.html">searchselection</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.searchsort.html">searchsort</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.selection.html">selection</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.sparqlbar.html">sparqlbar</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.sparqlresults.html">sparqlresults</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.workplace.html">workplace</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.workplaceadmin.html">workplaceadmin</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.workplacecontext.html">workplacecontext</a>
						</li>
						
						<li>
							<a href="com.marklogic.widgets.workplacenavbar.html">workplacenavbar</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="tutorials.list.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="tutorial-001-intro.html">001-intro</a>
						</li>
						
						<li>
							<a href="tutorial-001-widgets-list.html">001-widgets-list</a>
						</li>
						
						<li>
							<a href="tutorial-002-intro-firstpage.html">002-intro-firstpage</a>
						</li>
						
						<li>
							<a href="tutorial-002-widgets-search.html">002-widgets-search</a>
						</li>
						
						<li>
							<a href="tutorial-003-widgets-search-render.html">003-widgets-search-render</a>
						</li>
						
						<li>
							<a href="tutorial-004-widgets-highcharts.html">004-widgets-highcharts</a>
						</li>
						
						<li>
							<a href="tutorial-011-browser-create-app.html">011-browser-create-app</a>
						</li>
						
						<li>
							<a href="tutorial-012-browser-install-app.html">012-browser-install-app</a>
						</li>
						
						<li>
							<a href="tutorial-013-browser-samples-app.html">013-browser-samples-app</a>
						</li>
						
						<li>
							<a href="tutorial-014-browser-workplace.html">014-browser-workplace</a>
						</li>
						
						<li>
							<a href="tutorial-020-angular.html">020-angular</a>
						</li>
						
						<li>
							<a href="tutorial-050-core-contexts.html">050-core-contexts</a>
						</li>
						
						<li>
							<a href="tutorial-051-core-custom-searchcontext-endpoint.html">051-core-custom-searchcontext-endpoint</a>
						</li>
						
						<li>
							<a href="tutorial-060-rest-ext.html">060-rest-ext</a>
						</li>
						
						<li>
							<a href="tutorial-901-ontology.html">901-ontology</a>
						</li>
						
						<li>
							<a href="tutorial-999-samples.html">999-samples</a>
						</li>
						
						<li>
							<a href="tutorial-all.html">all</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-001-overview.html">dev1-001-overview</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-002-intro.html">dev1-002-intro</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-003-first-page.html">dev1-003-first-page</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-004-first-widget.html">dev1-004-first-widget</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-005-search-options.html">dev1-005-search-options</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-006-structured-query.html">dev1-006-structured-query</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-007-semantics.html">dev1-007-semantics</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-008-lunch.html">dev1-008-lunch</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-009-blending-mljs.html">dev1-009-blending-mljs</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-010-building-demo.html">dev1-010-building-demo</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-011-demo-jam.html">dev1-011-demo-jam</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-012-home-time.html">dev1-012-home-time</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#com">com</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: widget-profile.js</h1>
    
    <section>
        <article>
            <pre class="sunlight-highlight-javascript linenums">/*
Copyright 2012 MarkLogic Corporation

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
// global variable definitions
com = window.com || {};
com.marklogic = window.com.marklogic || {};
com.marklogic.widgets = window.com.marklogic.widgets || {};

/**
 * A wrapper for the Google Kratu tabular data exploration widget
 * @constructor
 * @param {string} container - The HTML ID of the element to place this widget's content within.
 */
com.marklogic.widgets.profile = function(container) {
  this.container = container;
  this.errorPublisher = new com.marklogic.events.Publisher(); 
  
  this._refresh();
};


com.marklogic.widgets.profile.prototype._refresh = function() {
  var puri = "/profiles/" + username + ".json";
  var self = this;
  mljs.defaultconnection.get(puri,function(result) {
    var str = "&lt;div class='mljswidget profile'>";
    
    var p = result.doc;
    
    str += "&lt;table style='border:none;width:100%;'>&lt;tr>&lt;td style='width:12.5%;height:180px;'>";
    //str += "&lt;img src='/show/view?uri=" + encodeURI(p.profileimguri) + "&original=true&fullurl=true' />";
    str += "&lt;img src='/v1/documents?uri=" + encodeURI(p.profileimguri) + "' />";
    str += "&lt;/td>&lt;td colspan='3' style='width:37.5%;height:180px;'>";
    str += "&lt;h2>" + p.name + "&lt;/h3>";
    str += "&lt;p>" + p.role + "&lt;/p>";
    str += "&lt;p>" + p.contact + "&lt;/p>";
    
    str += "&lt;/td>";
    
    str += "&lt;td colspan='4' rowspan='2' style='width:50%;'>";
    
    str += "&lt;h3>Details&lt;/h3>";
    str += "&lt;table style='border:none;width:100%'>";
    str += "&lt;tr>&lt;td style='width:50%;'>Mobile:&lt;/td>&lt;td>" + p.mobile + "&lt;td>&lt;/tr>";
    str += "&lt;tr>&lt;td style='width:50%;'>Account:&lt;/td>&lt;td>" + p.account + "&lt;td>&lt;/tr>";
    str += "&lt;tr>&lt;td style='width:50%;'>Email:&lt;/td>&lt;td>" + p.email + "&lt;td>&lt;/tr>";
    str += "&lt;tr>&lt;td style='width:50%;'>City:&lt;/td>&lt;td>" + p.city + "&lt;td>&lt;/tr>";
    str += "&lt;tr>&lt;td style='width:50%;'>Country:&lt;/td>&lt;td>" + p.country + "&lt;td>&lt;/tr>";
    str += "&lt;tr>&lt;td style='width:50%;'>Other:&lt;/td>&lt;td>" + p.other + "&lt;td>&lt;/tr>";
    str += "&lt;/table>";
    
    str += "&lt;h3>My RFPs&lt;/h3>";
    str += "&lt;table style='border:none;width:100%'>";
    str += "&lt;tr>&lt;th>Name&lt;/th>&lt;th>Date&lt;/th>&lt;th>Client&lt;/th>&lt;/tr>";
    for (var i = 0, max = p.rfps.length,r;i &lt; max;i++) {
      r = p.rfps[i];
      str += "&lt;tr>&lt;td>" + r.name + "&lt;/td>&lt;td>" + r.date + "&lt;/td>&lt;td>" + r.client + "&lt;/td>&lt;/tr>";
    }
    str += "&lt;/table>";
    
    str += "&lt;h3>My Saved Searches&lt;/h3>";
    str += "&lt;table style='border:none;width:100%'>";
    str += "&lt;tr>&lt;th>Name&lt;/th>&lt;th>Search&lt;/th>&lt;/tr>";
    for (var i = 0, max = p.searches.length,s;i &lt; max;i++) {
      s = p.searches[i];
      str += "&lt;tr>&lt;td>" + s.name + "&lt;/td>&lt;td>" + s.query + "&lt;/td>&lt;/tr>";
    }
    str += "&lt;/table>";
    
    str += "&lt;/td>&lt;/tr>";
    
    str += "&lt;tr>&lt;td colspan='4' style='width:50%;'>";
    
    str += "&lt;h3>Documents added over time&lt;/h3>";
    str += "&lt;img src='/v1/documents?uri=" + encodeURI(p.graphimguri) + "' />"
    
    str += "&lt;h3>Tag Cloud&lt;/h3>";
    str += "&lt;img src='/v1/documents?uri=" + encodeURI(p.cloudimguri) + "' />"
    
    str += "&lt;/td>&lt;/tr>";
    
    str += "&lt;/table>";
    
    str += "&lt;/div>";
    
    document.getElementById(self.container).innerHTML = str;
  });
};</pre>
        </article>
    </section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					MLJS - A JavaScript wrapper for the MarkLogic REST API
					<br />
					
					
		<span class="copyright">
		MarkLogic 2012-2014
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.3-dev</a>
		on Fri Aug 29 2014 09:40:24 GMT+0100 (BST) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:true,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
			    anchorName  : function(i, heading, prefix) {
					return $(heading).attr("id") || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

		} );
	</script>

	

</body>
</html>
